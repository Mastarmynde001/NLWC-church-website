<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Living Way Chapel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --accent-glow: rgba(27, 255, 255, 0.6);
            --primary-gradient: linear-gradient(135deg, #2e3192, #1bffff);
            --live-red: #ff0000;
        }

        body, html {
            margin: 0; padding: 0; overflow: hidden; background: #000;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        /* --- DYNAMIC TOP BANNER --- */
        #liveBanner {
            position: fixed; top: 0; left: 0; width: 100%; height: 50px;
            background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(15px);
            color: white; display: flex; align-items: center; justify-content: center;
            z-index: 10000; font-weight: bold; font-size: 13px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            transition: all 0.5s ease;
        }
        
        #liveBanner.live { background: var(--live-red); box-shadow: 0 4px 20px rgba(255, 0, 0, 0.4); }
        
        .banner-btn { 
            color: white; text-decoration: none; margin-left: 15px; 
            padding: 4px 12px; border: 1px solid white; border-radius: 20px;
            font-size: 11px; transition: 0.3s; text-transform: uppercase;
        }
        .banner-btn:hover { background: white; color: black; }

        .live-dot {
            width: 8px; height: 8px; background: #fff; border-radius: 50%;
            display: inline-block; margin-right: 8px; animation: blink 1.5s infinite;
        }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

        /* --- LOADING & BACKGROUND --- */
        #loader {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: #000; display: flex; align-items: center; justify-content: center;
            z-index: 9999; transition: opacity 1s ease;
        }
        .loader-logo { width: 100px; filter: invert(1) contrast(5) brightness(1.5); animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 0.5; } 50% { transform: scale(1.1); opacity: 1; } }

        #particleCanvas { position: fixed; top: 0; left: 0; z-index: 0; pointer-events: none; }

        /* --- 3D SCENE --- */
        .scene {
            width: 100vw; height: 100vh; perspective: 2000px;
            position: relative; z-index: 1; opacity: 0; transition: opacity 1.5s ease;
        }
        .cube {
            width: 100%; height: 100%; position: relative;
            transform-style: preserve-3d; transition: transform 1.2s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .face {
            position: absolute; width: 100vw; height: 100vh;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; color: white; background-size: cover; background-position: center;
            background-blend-mode: overlay;
        }

        .front  { transform: rotateX(0deg) translateZ(50vh); background-image: var(--primary-gradient), url('https://images.unsplash.com/photo-1438232992991-995b7058bbb3?auto=format&fit=crop&q=80&w=1000'); }
        .bottom { transform: rotateX(-90deg) translateZ(50vh); background-image: linear-gradient(135deg, #662d8c, #ed1e79), url('https://images.unsplash.com/photo-1510590337019-5ef8d3d32116?auto=format&fit=crop&q=80&w=1000'); }
        .back   { transform: rotateX(-180deg) translateZ(50vh); background-image: linear-gradient(135deg, #0092ff, #9cedff), url('https://images.unsplash.com/photo-1544427920-c49ccfb85579?auto=format&fit=crop&q=80&w=1000'); }
        .top    { transform: rotateX(-270deg) translateZ(50vh); background-image: linear-gradient(135deg, #662d91, #d91de1), url('https://images.unsplash.com/photo-1515162305285-0293e4767cc2?auto=format&fit=crop&q=80&w=1000'); }

        .face h1, .face p, .face .btn, .logo, .schedule-list {
            opacity: 0; transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .face.active-face h1 { opacity: 1; transform: translateY(0); transition-delay: 0.4s; }
        .face.active-face p, .face.active-face .schedule-list { opacity: 1; transform: translateY(0); transition-delay: 0.6s; }
        .face.active-face .btn { opacity: 1; transform: translateY(0); transition-delay: 0.8s; }
        .face.active-face .logo { opacity: 1; transform: translateY(0); transition-delay: 0.2s; }

        .logo { width: 280px; max-width: 80%; margin-top: 60px; margin-bottom: 10px; filter: invert(1) contrast(5) brightness(1.2); mix-blend-mode: multiply; }

        .glass-card {
            background: rgba(255, 255, 255, 0.08); backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15); padding: 2.5rem;
            border-radius: 30px; max-width: 500px; width: 85%; margin: 10px;
            transform-style: preserve-3d; transition: transform 0.2s ease-out;
        }
        h1 { font-size: 2.5rem; margin: 0; font-weight: 300; letter-spacing: 2px; }
        
        .schedule-list { list-style: none; padding: 0; margin: 15px 0; text-align: left; display: inline-block; width: 100%; }
        .schedule-list li { padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; }
        .day { font-weight: bold; color: #956ec5; }

        .btn { display: inline-block; margin-top: 15px; padding: 12px 30px; background: white; color: #2e3192; text-decoration: none; border-radius: 50px; font-weight: bold; transition: 0.3s; }

        /* --- SOCIAL SIDEBAR --- */
        .social-sidebar { position: fixed; left: 20px; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 15px; z-index: 1000; }
        .social-icon {
            display: flex; align-items: center; width: 48px; height: 48px; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 50px; color: white; text-decoration: none; overflow: hidden; transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); white-space: nowrap; box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        .social-icon i { min-width: 48px; text-align: center; font-size: 20px; }
        .social-text { padding-right: 25px; opacity: 0; transform: translateX(-15px); transition: all 0.4s ease; font-weight: 600; font-size: 14px; }
        .social-icon:hover { width: 280px; }
        .social-icon:hover .social-text { opacity: 1; transform: translateX(0); }
        .facebook:hover { background: #1877F2; border-color: #1877F2; }
        .instagram:hover { background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); }
        .tiktok:hover { background: #000; border-color: #fff; }
        .youtube:hover { background: #FF0000; border-color: #FF0000; }

        .indicators { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); display: flex; gap: 15px; z-index: 100; }
        .dot { width: 10px; height: 10px; border-radius: 50%; background: rgba(255,255,255,0.3); cursor: pointer; transition: 0.4s; }
        .dot.active { background: white; box-shadow: 0 0 15px var(--accent-glow); transform: scale(1.3); }

        .nav-controls { position: fixed; right: 25px; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 15px; z-index: 100; }
        .nav-btn { background: rgba(255,255,255,0.1); border: none; color: white; width: 45px; height: 45px; border-radius: 50%; cursor: pointer; backdrop-filter: blur(10px); font-size: 18px; transition: 0.3s; }
        .nav-btn:hover { background: white; color: #000; }

        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
            .social-icon:hover { width: 220px; }
            #liveBanner { font-size: 10px; }
            .banner-btn { margin-left: 5px; padding: 3px 8px; font-size: 9px; }
        }
    </style>
</head>
<body>

    <div id="liveBanner">
        <span id="bannerContent">Syncing services...</span>
    </div>

    <div id="loader"><img src="logo.png" class="loader-logo"></div>
    <canvas id="particleCanvas"></canvas>

    <div class="social-sidebar">
        <a href="https://facebook.com/yourpage" target="_blank" class="social-icon facebook"><i class="fab fa-facebook-f"></i><span class="social-text">Follow us on Facebook</span></a>
        <a href="https://instagram.com/yourpage" target="_blank" class="social-icon instagram"><i class="fab fa-instagram"></i><span class="social-text">Follow us on Instagram</span></a>
        <a href="https://tiktok.com/@yourpage" target="_blank" class="social-icon tiktok"><i class="fab fa-tiktok"></i><span class="social-text">Follow us on TikTok</span></a>
        <a href="https://youtube.com/yourchannel" target="_blank" class="social-icon youtube"><i class="fab fa-youtube"></i><span class="social-text">Subscribe to our YouTube channel</span></a>
    </div>

    <div class="indicators">
        <div class="dot active" onclick="goToFace(0)"></div>
        <div class="dot" onclick="goToFace(1)"></div>
        <div class="dot" onclick="goToFace(2)"></div>
        <div class="dot" onclick="goToFace(3)"></div>
    </div>

    <div class="nav-controls">
        <button class="nav-btn" onclick="rotate('up')">↑</button>
        <button class="nav-btn" onclick="rotate('down')">↓</button>
    </div>

    <div class="scene" id="mainScene">
        <div class="cube" id="cube">
            <section class="face front active-face">
                <img src="logo.png" class="logo">
                <div class="glass-card">
                    <h1>NEW LIVING WAY CHAPEL</h1>
                    <p>Welcome home. Join us this Sunday as we celebrate faith and fellowship together.</p>
                    <a href="#" class="btn">New Here?</a>
                </div>
            </section>
            
            <section class="face bottom">
                <div class="glass-card">
                    <h1>Our Mission</h1>
                    <p>To spread hope and build a community rooted in love.</p>
                    <a href="#" class="btn">Learn More</a>
                </div>
            </section>
            
            <section class="face back">
                <div class="glass-card">
                    <h1>Community</h1>
                    <p>Small groups and local outreach. There is a place for you.</p>
                    <a href="#" class="btn">Find a Group</a>
                </div>
            </section>
            
            <section class="face top">
                <div class="glass-card">
                    <h1>Our Services</h1>
                    <ul class="schedule-list">
                        <li><span class="day">Sundays</span> <span>8:30 AM</span></li>
                        <li><span class="day">Thursdays</span> <span>7:00 AM</span></li>
                    </ul>
                    <a href="#" class="btn">Join Us</a>
                </div>
            </section>
        </div>
    </div>

    <script>
        // --- CALENDAR LOGIC ---
        function addToCalendar(date, name) {
            const start = date.toISOString().replace(/-|:|\.\d\d\d/g, "");
            const end = new Date(date.getTime() + 2 * 60 * 60 * 1000).toISOString().replace(/-|:|\.\d\d\d/g, "");
            const url = `https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(name)}&dates=${start}/${end}&details=Join+us+live+at:+https://youtube.com/yourchannel/live&location=Online&sf=true&output=xml`;
            window.open(url, '_blank');
        }

        // --- SMART COUNTDOWN & LIVE LOGIC ---
        let globalNextService = null;

        function updateBanner() {
            const banner = document.getElementById('liveBanner');
            const content = document.getElementById('bannerContent');
            const now = new Date();
            
            const services = [
                { day: 0, hour: 8, min: 30, duration: 3, name: "Sunday Worship Service" },
                { day: 4, hour: 7, min: 0, duration: 2, name: "Thursday Prayer Meeting" }
            ];

            let activeService = null;

            services.forEach(s => {
                if (now.getDay() === s.day) {
                    const todayStart = new Date(now);
                    todayStart.setHours(s.hour, s.min, 0);
                    const todayEnd = new Date(todayStart);
                    todayEnd.setHours(todayStart.getHours() + s.duration);
                    
                    if (now >= todayStart && now <= todayEnd) activeService = s;
                }
            });

            if (activeService) {
                banner.classList.add('live');
                content.innerHTML = `<span class="live-dot"></span> WE ARE LIVE! <a href="https://youtube.com/yourchannel/live" target="_blank" class="banner-btn">JOIN NOW</a>`;
            } else {
                banner.classList.remove('live');
                let minDiff = Infinity;

                services.forEach(s => {
                    let sDate = new Date(now);
                    sDate.setDate(now.getDate() + (s.day - now.getDay() + 7) % 7);
                    sDate.setHours(s.hour, s.min, 0);
                    if (sDate <= now) sDate.setDate(sDate.getDate() + 7);
                    
                    let diff = sDate - now;
                    if (diff < minDiff) {
                        minDiff = diff;
                        globalNextService = { date: sDate, name: s.name };
                    }
                });

                const d = Math.floor(minDiff / (1000 * 60 * 60 * 24));
                const h = Math.floor((minDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const m = Math.floor((minDiff % (1000 * 60 * 60)) / (1000 * 60));
                const s = Math.floor((minDiff % (1000 * 60)) / 1000);

                content.innerHTML = `NEXT SERVICE: ${d}d ${h}h ${m}m ${s}s <a href="#" onclick="addToCalendar(globalNextService.date, globalNextService.name)" class="banner-btn">Remind Me</a>`;
            }
        }

        setInterval(updateBanner, 1000);
        updateBanner();

        // --- CUBE & LOADER LOGIC ---
        window.addEventListener('load', () => {
            const loader = document.getElementById('loader');
            const scene = document.getElementById('mainScene');
            loader.style.opacity = '0';
            scene.style.opacity = '1';
            setTimeout(() => { loader.style.display = 'none'; }, 1000);
        });

        let currentStep = 0;
        let isSpinning = false;
        const cube = document.getElementById('cube');
        const dots = document.querySelectorAll('.dot');
        const faces = document.querySelectorAll('.face');

        function updateUI() {
            let index = ((currentStep % 4) + 4) % 4;
            dots.forEach(d => d.classList.remove('active'));
            dots[index].classList.add('active');
            faces.forEach(f => f.classList.remove('active-face'));
            faces[index].classList.add('active-face');
        }

        function rotate(dir) {
            if (isSpinning) return;
            isSpinning = true;
            dir === 'down' ? currentStep++ : currentStep--;
            apply();
        }

        function goToFace(idx) {
            if (isSpinning) return;
            isSpinning = true;
            let currentIdx = ((currentStep % 4) + 4) % 4;
            currentStep += (idx - currentIdx);
            apply();
        }

        function apply() {
            cube.style.transform = `rotateX(${currentStep * 90}deg)`;
            updateUI();
            setTimeout(() => { isSpinning = false; }, 1200);
        }

        window.addEventListener('wheel', (e) => { if (Math.abs(e.deltaY) > 20) rotate(e.deltaY > 0 ? 'down' : 'up'); });

        // --- PARTICLES ---
        const canvas = document.getElementById('particleCanvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; init(); }
        class P {
            constructor() { this.x = Math.random()*canvas.width; this.y = Math.random()*canvas.height; this.s = Math.random()*2; this.bx = this.x; this.by = this.y; }
            draw() { ctx.fillStyle = 'rgba(255,255,255,0.4)'; ctx.beginPath(); ctx.arc(this.x, this.y, this.s, 0, Math.PI*2); ctx.fill(); }
            update(m) {
                let dx = m.x - this.x, dy = m.y - this.y, d = Math.sqrt(dx*dx+dy*dy);
                if (d < 100) { this.x -= dx/d * 5; this.y -= dy/d * 5; }
                else { this.x += (this.bx-this.x)*0.1; this.y += (this.by-this.y)*0.1; }
            }
        }
        function init() { particles = []; for(let i=0; i<80; i++) particles.push(new P()); }
        const m = { x:0, y:0 }; window.addEventListener('mousemove', e => { m.x=e.x; m.y=e.y; });
        function anim() { ctx.clearRect(0,0,canvas.width,canvas.height); particles.forEach(p => { p.update(m); p.draw(); }); requestAnimationFrame(anim); }
        window.addEventListener('resize', resize); resize(); anim();
    </script>
</body>
</html>